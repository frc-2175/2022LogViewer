<script
type="text/javascript"
src="https://unpkg.com/vis-timeline@latest/standalone/umd/vis-timeline-graph2d.min.js"
></script>
<link href="../../dist/vis-timeline-graph2d.min.css" rel="stylesheet" type="text/css" />

<div id="tooltips"></div>

<script>
const rawData = `{"message":"Spacetime Start","fields":[{"tags":[],"value":"Competition","name":"Robot"},{"tags":[],"value":2175,"name":"Team"},{"tags":[],"value":"Robot on!!!","name":"EventName"},{"tags":[],"value":1,"name":"ID"},{"tags":[],"value":-1,"name":"ParentID"}],"level":"INFO","timestamp":0}
{"message":"Spacetime Start","fields":[{"tags":[],"value":"Competition","name":"Robot"},{"tags":[],"value":2175,"name":"Team"},{"tags":[],"value":"Robot enabled!!!","name":"EventName"},{"tags":[],"value":2,"name":"ID"},{"tags":[],"value":1,"name":"ParentID"}],"level":"INFO","timestamp":1}
{"message":"Spacetime Start","fields":[{"tags":[],"value":"Competition","name":"Robot"},{"tags":[],"value":2175,"name":"Team"},{"tags":[],"value":"Motor Data","name":"EventName"},{"tags":[],"value":3,"name":"ID"},{"tags":[],"value":-1,"name":"ParentID"}],"level":"INFO","timestamp":3}
{"message":"Spacetime End","fields":[{"tags":[],"value":"Competition","name":"Robot"},{"tags":[],"value":2175,"name":"Team"},{"tags":[],"value":"Robot on!!!","name":"EventName"},{"tags":[],"value":1,"name":"ID"},{"tags":[],"value":-1,"name":"ParentID"}],"level":"INFO","timestamp":4}
{"message":"Spacetime End","fields":[{"tags":[],"value":"Competition","name":"Robot"},{"tags":[],"value":2175,"name":"Team"},{"tags":[],"value":"Robot enabled!!!","name":"EventName"},{"tags":[],"value":2,"name":"ID"},{"tags":[],"value":1,"name":"ParentID"}],"level":"INFO","timestamp":2}
{"message":"Spacetime End","fields":[{"tags":[],"value":"Competition","name":"Robot"},{"tags":[],"value":2175,"name":"Team"},{"tags":[],"value":"Motor Data","name":"EventName"},{"tags":[],"value":3,"name":"ID"},{"tags":[],"value":-1,"name":"ParentID"}],"level":"INFO","timestamp":4}`;

let convertedData = {data: []}
let timelineData = []
let idIncrement = 1
let startStopPair = {}

rawData.split("\n").forEach((item, index) => {
    console.log(item)
    convertedData["data"].push(JSON.parse(item))
})

const parsedData = convertedData["data"][0]

function processFieldData(fieldData) {
    var outString = ""
    fieldData.forEach(element => {
        
        outString += "<br>" + element["name"] + ": " + element["value"]
    });
    return outString;
}

convertedData["data"].forEach((item, index) => {
    let eventData = item
    timelineData.push({id: idIncrement, content: eventData["message"], start: eventData["timestamp"], title: `<b>${eventData["message"]}</b>` + processFieldData(eventData["fields"])})
    idIncrement += 1
})

// Create a DataSet (allows two way data-binding)
var items = new vis.DataSet(timelineData);

// Options
var options = {};

// Timeline object
var timelineTooltips = new vis.Timeline(
  document.getElementById("tooltips"),
  items,
  options
);

// Follow options
var follow_options = {
  tooltip: {
    followMouse: true,
  },
};
</script>
    